@import "./avatars";

// Hide post lock modal as we have our own read-only mode.
.editor-post-locked-modal,
.components-modal__screen-overlay:has(.editor-post-locked-modal) {
	display: none;
}

body.gutenberg-collaborative-editing {
	// Hide the top document bar to make space for presence UI.
	.editor-document-bar {
		display: none;
	}
}

/* Read-only styles */
body.gutenberg-collaborative-editing-readonly {

	.editor-visual-editor {
		position: relative;
		cursor: not-allowed;
		user-select: none;
		-webkit-user-select: none;
		-moz-user-select: none;
		-ms-user-select: none;

		// Overlay to prevent interaction.
		&::before {
			content: "";
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			z-index: 999999;
			pointer-events: none;
		}
	}

	// Hide various editor controls in read-only mode.
	.block-editor-block-contextual-toolbar,
	.block-editor-block-popover,
	.editor-header__settings .interface-pinned-items,
	.editor-header__toolbar,
	.editor-post-publish-button,
	.editor-post-publish-button__button,
	.editor-post-save-draft,
	.editor-post-saved-state {
		display: none !important;
	}

	.editor-styles-wrapper {
		pointer-events: none;
		opacity: 0.7;
	}
}

.gutenberg-collaborative-editing-read-only-modal {
	width: 500px;
}

/* Remote Cursors and Selections */
@keyframes blink {

	0%,
	100% {
		opacity: 1;
	}

	50% {
		opacity: 0.5;
	}
}

.cursor-overlay {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	pointer-events: none;
	z-index: 1000000;
}

.remote-cursor {
	position: absolute;
	width: 2px;
	background-color: #ff6b6b;
	animation: blink 1s infinite;
}

.cursor-label {
	position: absolute;
	font-size: 11px;
	padding: 2px 6px;
	border-radius: 4px;
	transform: translateY(-100%);
	margin-top: -2px;
	background-color: #ff6b6b;
	color: #fff;
	white-space: nowrap;
}

.remote-selection {
	position: absolute;
	opacity: 0.3;
}

/* Read-only Badge */
.gutenberg-collaborative-editing-readonly-badge {
	display: flex;
	align-items: center;
	background-color: #f8f9f9;
	color: #1e1e1e;
	font-size: 13px;
	line-height: 1.4;
	padding: 4px 8px;
	border-radius: 2px;
	border: 1px solid #ddd;
	margin-right: 8px;
}
